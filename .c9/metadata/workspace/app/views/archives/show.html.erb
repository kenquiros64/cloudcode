{"changed":true,"filter":false,"title":"show.html.erb","tooltip":"/app/views/archives/show.html.erb","value":"<div class=\"box effect2\">  \n  <p>\n    <h3>File: <div id=\"file_name\"><%= @archive.uploaded_file_file_name %></div> </h3> \n    \n    \n    \n  </p>\n  \n  <div id=\"programming_language\">\n    \n    <h4 style=\"float:left;\"></h4>\n    <div style=\"float:right;\">\n      <%= link_to 'Download this code', download_url(@archive), :class => 'btn btn-default btn-sm', :id => 'download_button' %>\n      \n       <% if user_signed_in? and current_user.id == @archive.user_id%>\n        <button id='save_button' class='btn btn-default btn-sm'> Save </button>\n      <% end %>\n    </div>\n    \n  </div>\n  \n  <br></br>\n  \n  <div id=\"ace-editor-section\">\n    <pre id=\"editor\"><%= File.open(@archive.uploaded_file.path, \"r:ISO-8859-1\") do |a|\n      @archive.uploaded_file = a\n      a.read\n      end %>\n    </pre>\n    \n    <div id=\"prueba\">\n    </div>\n    \n  </div>\n  \n  <script>\n    var setMode = function(extension){\n      editor.session.setMode(\"ace/mode/\" + extension);\n    }\n  \n    var file_name = $(\"#file_name\").text();\n    console.log(file_name);\n    \n    //Split file_name and get the last element, that's to say, the file_extension\n    var file_nameArray = file_name.split('.');\n    console.log(file_nameArray);\n    var file_extension = file_nameArray[file_nameArray.length - 1];\n    \n    console.log(file_extension);\n    \n    //Prepare Ace Editor\n    var editor = ace.edit(\"editor\");\n    editor.setTheme(\"ace/theme/github\");\n    \n    var programming_language = '';\n    $(\"#programming_language>h4\").empty();\n    //Select the correct file extension\n    switch (file_extension) { \n    \tcase 'py': \n    \t\tprogramming_language = 'Python';\n    \t\tsetMode('python');\n    \t\tbreak;\n    \tcase 'cs': \n    \t\tprogramming_language = 'C Sharp';\n    \t\tsetMode('csharp');\n    \t\tbreak;\n    \tcase 'rb': \n    \t\tprogramming_language = 'Ruby';\n    \t\tsetMode('ruby');\n    \t\tbreak;\t\t\n    \tcase 'js': \n    \t\tprogramming_language = 'JavaScript';\n    \t\tsetMode('javascript');\n    \t\tbreak;\n    \tcase 'tex': \n    \t\tprogramming_language = 'Latex';\n    \t\tsetMode('latex');\n    \t\tbreak;\n    \tcase 'c': \n    \t\tprogramming_language = 'C';\n    \t\tsetMode('c_cpp');\n    \t\tbreak;\n    \tcase 'cpp': \n    \t\tprogramming_language = 'C++';\n    \t\tsetMode('c_cpp');\n    \t\tbreak;\n    \tcase 'java': \n    \t\tprogramming_language = 'Java';\n    \t\tsetMode('java');\n    \t\tbreak;\n    \tcase 'scala': \n    \t\tprogramming_language = 'Scala';\n    \t\tsetMode('scala');\n    \t\tbreak;\n    \tcase 'html': \n    \t\tprogramming_language = 'HTML';\n    \t\tsetMode('html');\n    \t\tbreak;\n    \tcase 'css': \n    \t\tprogramming_language = 'CSS';\n    \t\tsetMode('css');\n    \t\tbreak;\n    \tdefault:\n    \t\talert('This file extension is not allowed!');\n    }\n    $(\"#programming_language>h4\").append(\"Programming Language: \" + programming_language);\n  </script>\n  \n  <% if user_signed_in? and current_user.id != @archive.user_id%>\n    <%= link_to 'Back', public_browse_path(@archive.folder_id) %>\n  <% else %>\n    <%= link_to 'Back', browse_path(@archive.folder_id) %>\n  <% end %>\n</div>","undoManager":{"mark":14,"position":14,"stack":[[{"start":{"row":13,"column":6},"end":{"row":14,"column":0},"action":"insert","lines":["",""],"id":962},{"start":{"row":14,"column":0},"end":{"row":14,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":14,"column":6},"end":{"row":16,"column":15},"action":"insert","lines":[" <% if user_signed_in? and current_user.id == @archive.user_id%>","        <button id='save_button' class='btn btn-default btn-sm'> Save </button>","      <% end %>"],"id":963}],[{"start":{"row":30,"column":8},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":964},{"start":{"row":31,"column":0},"end":{"row":31,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":31,"column":2},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":965},{"start":{"row":32,"column":0},"end":{"row":32,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":29,"column":4},"end":{"row":30,"column":0},"action":"insert","lines":["",""],"id":968},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":30,"column":4},"end":{"row":31,"column":10},"action":"insert","lines":["<div id=\"prueba\">","    </div>"],"id":969}],[{"start":{"row":31,"column":10},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":970},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":32,"column":4},"end":{"row":33,"column":0},"action":"insert","lines":["",""],"id":971},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"remove","lines":["  "],"id":972}],[{"start":{"row":34,"column":8},"end":{"row":35,"column":0},"action":"remove","lines":["",""],"id":973}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"remove","lines":["  "],"id":974}],[{"start":{"row":34,"column":8},"end":{"row":35,"column":0},"action":"remove","lines":["",""],"id":975}],[{"start":{"row":33,"column":2},"end":{"row":33,"column":4},"action":"remove","lines":["  "],"id":976}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":2},"action":"remove","lines":["  "],"id":977}],[{"start":{"row":32,"column":4},"end":{"row":33,"column":0},"action":"remove","lines":["",""],"id":978}]]},"ace":{"folds":[],"scrolltop":36,"scrollleft":0,"selection":{"start":{"row":3,"column":4},"end":{"row":3,"column":4},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":67,"state":"js-start","mode":"ace/mode/html_ruby"}},"timestamp":1447996664000}